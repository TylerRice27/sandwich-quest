var w=Object.defineProperty;var u=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var _=(o,t,s)=>t in o?w(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,f=(o,t)=>{for(var s in t||(t={}))S.call(t,s)&&_(o,s,t[s]);if(u)for(var s of u(t))k.call(t,s)&&_(o,s,t[s]);return o};import{l as q,g as T,D,G as I,c as r,a as m,o as i,b as l,d as e,t as Q,w as j,h as p,A as v,F as b,i as L,j as g,C as h,p as M,k as C,z as V}from"./vendor.47248ccd.js";import{_ as B,q as E,a as P,P as y,A as d,b as N,l as F,c as U}from"./index.72709b46.js";const z={name:"Account",setup(){const o=q(),t=T({});return D(()=>{t.value=f({},d.account)}),I(async()=>{try{await E.getMyQuests(),await P.getMyQuestItems()}catch(s){console.error(s),y.toast(s,"error")}}),{router:o,edits:t,account:r(()=>d.account),quests:r(()=>d.quests.sort((s,a)=>new Date(a.createdAt)-new Date(s.createdAt))),questsItems:r(()=>d.questitems),goToQuestDetails(s){o.push({name:"QuestDetails",params:{id:s}})},async editAccount(){try{t.value._id=d.account.id,await N.editAccount(t.value)}catch(s){F.error(s),y.toast(s.message,"error")}},async logout(){U.logout({returnTo:window.location.origin})}}}},n=o=>(M("data-v-9e2f1530"),o=o(),C(),o),G={key:0,class:"container"},R={class:"d-flex justify-content-end pt-2"},H=V("Logout "),J=n(()=>e("i",{class:"mdi mdi-logout"},null,-1)),K=[H,J],O={class:"about text-center"},W=["src"],X=n(()=>e("button",{class:"btn btn-success",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasTop","aria-controls":"offcanvasTop"},"Edit Account",-1)),Y={class:"offcanvas offcanvas-top bg-dark",tabindex:"-1",id:"offcanvasTop","aria-labelledby":"offcanvasTopLabel"},Z=n(()=>e("div",{class:"offcanvas-header"},[e("h5",{id:"offcanvasTopLabel"},"Edit Account"),e("i",{class:"mdi mdi-window-close btn-dark bg-dark text-reset selectable","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),$={class:"offcanvas-body"},tt={class:"col-md-6 d-flex flex-column"},et={class:"p-2 d-flex justify-content-around"},st=n(()=>e("label",{class:"ms-5",for:""},"Account name:",-1)),ot={class:"p-2 d-flex justify-content-around"},at=n(()=>e("label",{class:"ms-5",for:""},"Account picture:",-1)),ct=n(()=>e("button",{"data-bs-dismiss":"offcanvas","aria-label":"Save",class:"btn btn-primary mt-3"},"Save",-1)),nt=n(()=>e("h3",{class:"mt-4 py-2"},"My Quests:",-1));function it(o,t,s,a,dt,rt){const x=m("Quest"),A=m("Login");return i(),l(b,null,[a.account.id?(i(),l("div",G,[e("div",R,[e("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...c)=>a.logout&&a.logout(...c))},K)]),e("div",O,[e("img",{class:"rounded-pill p-3",src:a.account.picture,alt:""},null,8,W),e("h1",null,Q(a.account.name),1),X,e("div",Y,[Z,e("div",$,[e("form",{class:"d-flex flex-column align-items-center",action:"",onSubmit:t[3]||(t[3]=j((...c)=>a.editAccount&&a.editAccount(...c),["prevent"]))},[e("div",tt,[e("div",et,[st,p(e("input",{class:"me-5",type:"text","onUpdate:modelValue":t[1]||(t[1]=c=>a.edits.name=c)},null,512),[[v,a.edits.name]])]),e("div",ot,[at,p(e("input",{class:"me-5",type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>a.edits.picture=c)},null,512),[[v,a.edits.picture]])]),ct])],32)])]),nt,(i(!0),l(b,null,L(a.quests,c=>(i(),h(x,{key:c.id,quest:c},null,8,["quest"]))),128))])])):g("",!0),a.account.id?g("",!0):(i(),h(A,{key:1}))],64)}var ft=B(z,[["render",it],["__scopeId","data-v-9e2f1530"]]);export{ft as default};
